<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Resume | Yilmaz Mustafa</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #005F73;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: none;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* --- PDF Print Optimization Styles --- */
        @media print {
            body {
                background-color: #fff !important;
                color: #000 !important;
                margin: 0;
                padding: 0;
            }
            .container {
                padding: 0;
                margin: 0;
                max-width: none;
            }
            /* Remove shadows, which look bad on print */
            .shadow-lg, .shadow-sm {
                box-shadow: none !important;
                border: 1px solid #ddd !important;
            }
            /* Ensure text is black and headings are legible */
            h1, h2, h3, h4, p, span, a, time {
                color: #000 !important;
            }
            /* Hide the interactive tool for printing */
            #gemini-analysis, #exportResumeButton {
                display: none;
            }
            /* Ensure charts have enough space vertically */
            .chart-container {
                height: 300px !important;
                max-height: 350px !important;
            }
            /* Simplify project cards */
            .project-card {
                page-break-inside: avoid;
            }
            /* Make link colors black but retain underline */
            a {
                text-decoration: underline;
            }

            /* --- New: Force single-column layouts on print to avoid two-column/timeline issues --- */
            /* Tailwind responsive utility classes include colons in class names; escape them here. */
            .md\:grid, .md\:grid-cols-2, .md\:grid-cols-3, .md\:gap-8, .md\:col-span-2, .md\:col-span-3 {
                display: block !important;
                grid-template-columns: none !important;
                width: 100% !important;
            }
            /* Ensure items that were right-aligned on desktop are left-aligned in print */
            .md\:text-right {
                text-align: left !important;
                padding-right: 0 !important;
            }
            /* Neutralize left margins introduced for timeline visuals */
            .ml-8, .ml-6, .md\:ml-0 {
                margin-left: 0 !important;
            }
            /* Prevent small date columns from compressing the main content */
            .experience-list .p-4, .experience-list [style*="min-width"] {
                min-width: 0 !important;
            }
            /* Ensure grid-based development/education cards stack vertically */
            .grid, .grid-cols-1, .sm\:grid-cols-2, .lg\:grid-cols-3, .xl\:grid-cols-4 {
                display: block !important;
                width: 100% !important;
            }
            /* Avoid breaking cards across pages */
            .rounded-xl, .project-card-border, .bg-white {
                page-break-inside: avoid;
            }
        }
        /* Added class for project cards to ensure proper styling across environments */
        .project-card-border {
            border-left-width: 4px;
        }
        /* Styling for the Analysis Output */
        .analysis-content ul {
            list-style-type: disc;
            padding-left: 1.5rem;
            margin-top: 0.5rem;
        }
        .analysis-content strong {
            font-weight: 700;
        }
        /* Input styling for read-only state */
        textarea[readonly], input[readonly] {
            cursor: not-allowed;
            background-color: #f7f7f7;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
<!--
    Color Palette Selection: Brilliant Blues
    - Primary: #005F73
    - Secondary: #0A9396
    - Accent: #94D2BD
    - Highlight: #E9D8A6
    - Background/Text: #EE9B00, #CA6702, #BB3E03, #AE2012, #9B2226
-->
<!-- Plan Narrative: 1. Snapshot (KPIs) 2. Contextual Skill Aligner (Offline Analysis). 3. Skills (Visual Charts) 4. Experience (Timeline) 5. Projects (List of cards). -->
<!-- Visualization Choices: KPIs (Single Big Number), Skills (Doughnut, Bar, Radar for different categories - Comparison/Inform), Projects (List of cards - Organization/Inform). Confirmed NO SVG. -->
<div class="container mx-auto p-4 md:p-8">
    <header class="text-center mb-12">
        <h1 class="text-5xl font-extrabold text-[#005F73]">YILMAZ MUSTAFA</h1>
        <p class="text-2xl font-light text-[#0A9396] mt-2">Java & Spring Software Engineer</p>
        <div class="mt-4 flex justify-center items-center space-x-4 text-slate-600">
            <span>üìß yilmaz@codesapien.net</span>
            <span class="text-[#94D2BD]">|</span>
            <span>üåê codesapien.net</span>
            <span class="text-[#94D2BD]">|</span>
            <span>üíº codesapienbe (LinkedIn)</span>
        </div>
        <!-- New Export Resume Button -->
        <button id="exportResumeButton" onclick="exportFullResume()" class="mt-6 flex items-center justify-center mx-auto space-x-2 bg-[#0A9396] hover:bg-[#005F73] text-white font-bold py-3 px-6 rounded-lg transition duration-200 shadow-md w-full max-w-sm md:max-w-xs">
            Export Resume as Word (DOC) üìÑ
        </button>
    </header>

    <main>
        <section id="summary" class="mb-16">
            <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-3xl font-bold text-center text-[#005F73] mb-6">Professional Snapshot</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                    <div>
                        <p class="text-6xl font-extrabold text-[#CA6702]">8+</p>
                        <p class="text-xl font-medium text-slate-700 mt-2">Years of Development</p>
                        <p class="text-slate-500 mt-1">Total experience across Java, Python, and C#.</p>
                    </div>
                    <div>
                        <p class="text-6xl font-extrabold text-[#BB3E03]">4</p>
                        <p class="text-xl font-medium text-slate-700 mt-2">Core Architectures</p>
                        <p class="text-slate-500 mt-1">Monolith, Microservices, Modulith, and SCS.</p>
                    </div>
                    <div>
                        <p class="text-6xl font-extrabold text-[#AE2012]">10k+</p>
                        <p class="text-xl font-medium text-slate-700 mt-2">Concurrent Users</p>
                        <p class="text-slate-500 mt-1">Supported in high-performance apps.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="gemini-analysis" class="mb-16">
            <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-3xl font-bold text-center text-[#005F73] mb-6">Contextual Skill Match üéØ</h2>
                <p class="text-slate-600 mb-2 text-center">Enter company details and paste a job description below for an instant analysis.</p>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                    <label for="companyNameInput" class="sr-only">Company Name</label>
                    <input type="text" id="companyNameInput" aria-label="Company Name" class="w-full p-2 border border-slate-300 rounded-lg focus:ring-[#0A9396] focus:border-[#0A9396] text-slate-700" placeholder="Target Company Name (e.g., Acme Corp)">
                    <label for="companyUrlInput" class="sr-only">Company Website URL</label>
                    <input type="url" id="companyUrlInput" aria-label="Company Website URL" class="w-full p-4 border border-slate-300 rounded-lg focus:ring-[#0A9396] focus:border-[#0A9396] text-slate-700" placeholder="Website URL (e.g., https://example.com)">
                </div>

                <label for="jobDescriptionInput" class="sr-only">Job Description</label>
                <textarea id="jobDescriptionInput" aria-label="Job Description" rows="6" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-[#0A9396] focus:border-[#0A9396] text-slate-700" placeholder="Paste the job description (e.g., Backend Engineer, Java/Kubernetes)..."></textarea>

                <div class="flex justify-center mt-4 space-x-4">
                    <button id="analyzeButton" class="flex items-center space-x-2 bg-[#EE9B00] hover:bg-[#CA6702] text-white font-bold py-3 px-6 rounded-lg transition duration-200 shadow-md w-full max-w-[200px]" type="button">
                        <span>Run Match üöÄ</span>
                        <span id="loadingSpinner" class="loading-spinner"></span>
                    </button>

                    <div id="exportContainer" class="hidden w-full max-w-[200px]">
                        <button id="exportButton" class="w-full flex items-center justify-center bg-[#0A9396] hover:bg-[#005F73] text-white font-bold py-3 px-6 rounded-lg transition duration-200 shadow-md" type="button">
                            Export Match Report üìÑ
                        </button>
                    </div>
                </div>

                <div id="analysisOutput" class="mt-8 pt-4 border-t border-slate-200">
                    <h3 class="text-xl font-bold text-[#0A9396] mb-2">Analysis Results:</h3>
                    <p id="outputPlaceholder" class="text-slate-500 italic">Results will appear here after analysis.</p>
                    <!-- Analysis Results are injected here -->
                    <div id="outputContent" class="text-slate-700 analysis-content"></div>
                </div>
            </div>
        </section>

        <section id="skills" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#005F73] mb-8">Core Technical Expertise</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-[#0A9396] mb-4">Java & Enterprise Core</h3>
                    <p class="text-slate-600 mb-4">Deep expertise in the Java ecosystem, focusing on modern, high-performance backend development with the Spring Framework.</p>
                    <div class="chart-container h-64 md:h-72">
                        <canvas id="javaSkillsChart"></canvas>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-xl font-bold text-[#0A9396] mb-4">APIs & Database Tech</h3>
                    <p class="text-slate-600 mb-4">Strong command of API design and a wide range of database technologies, ensuring efficient data persistence and integration.</p>
                    <div class="chart-container h-64 md:h-72">
                        <canvas id="apiDbSkillsChart"></canvas>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 md:col-span-2 lg:col-span-1">
                    <h3 class="text-xl font-bold text-[#0A9396] mb-4">DevOps, Cloud & Architecture</h3>
                    <p class="text-slate-600 mb-4">Proficient in modern DevOps practices, cloud platforms, and software architecture principles for building resilient systems.</p>
                    <div class="chart-container h-64 md:h-72">
                        <canvas id="devopsSkillsChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="experience" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#005F73] mb-8">Professional Journey</h2>
            <div class="relative border-l-4 border-[#94D2BD] ml-6 md:ml-0 md:mx-auto">
                <!-- EXPERIENCE 1: Python AI Applications (Freelance) -->
                <div class="mb-10 ml-8 md:ml-0">
                    <div class="absolute -left-1.5 mt-1.5 w-3 h-3 bg-[#005F73] rounded-full"></div>
                    <div class="md:grid md:grid-cols-2 md:gap-8">
                        <div class="md:text-right md:pr-8">
                            <time class="block mb-1 text-sm font-normal leading-none text-slate-500">Feb 2025 ‚Äì May 2025 (4 mos)</time>
                            <h3 class="text-xl font-semibold text-[#005F73]">Software Engineer</h3>
                            <span class="text-sm font-medium text-[#0A9396]">(Freelance - Python AI Focus)</span>
                        </div>
                        <div class="p-4 bg-white rounded-lg border border-slate-200 shadow-sm mt-2 md:mt-0">
                            <ul class="list-disc ml-4 text-base font-normal text-slate-600 space-y-1">
                                <li>Developed <strong>Python AI Applications</strong> using <strong>OpenCV</strong> and <strong>TensorFlow</strong> for computer vision systems, integrating them via <strong>FastAPI</strong> backends.</li>
                                <li>Implemented cross-platform mobile applications using <strong>React Native</strong> with embedded AI capabilities (<strong>TensorFlow Lite</strong>).</li>
                            </ul>
                            <p class="text-xs text-slate-500 mt-2">Skills: Python, Computer Vision, FastAPI, React Native, TensorFlow, NestJS, Software Design.</p>
                        </div>
                    </div>
                </div>
                <!-- EXPERIENCE 2: Java Software Engineer (theMatchBox) -->
                <div class="mb-10 ml-8 md:ml-0">
                    <div class="absolute -left-1.5 mt-1.5 w-3 h-3 bg-[#005F73] rounded-full"></div>
                    <div class="md:grid md:grid-cols-2 md:gap-8">
                        <div class="md:text-right md:pr-8">
                            <time class="block mb-1 text-sm font-normal leading-none text-slate-500">Oct 2024 ‚Äì Feb 2025 (5 mos)</time>
                            <h3 class="text-xl font-semibold text-[#005F73]">Java Software Engineer</h3>
                            <p class="text-sm font-normal text-slate-500">theMatchBox, Antwerp</p>
                        </div>
                        <div class="p-4 bg-white rounded-lg border border-slate-200 shadow-sm mt-2 md:mt-0">
                            <ul class="list-disc ml-4 text-base font-normal text-slate-600 space-y-1">
                                <li>Developed custom <strong>ElasticSearch Java Plugins</strong> for advanced search and matching algorithms, improving accuracy and relevance.</li>
                                <li>Performed JVM tuning and Spring application performance enhancement, achieving measurable latency reduction using <strong>ZeroMQ</strong> for communication.</li>
                            </ul>
                            <p class="text-xs text-slate-500 mt-2">Skills: Java, Spring Boot, Elasticsearch, ZeroMQ, Distributed Systems, Performance Optimization.</p>
                        </div>
                    </div>
                </div>
                <!-- EXPERIENCE 3: Java Software Engineer (SWIFT) -->
                <div class="mb-10 ml-8 md:ml-0">
                    <div class="absolute -left-1.5 mt-1.5 w-3 h-3 bg-[#005F73] rounded-full"></div>
                    <div class="md:grid md:grid-cols-2 md:gap-8">
                        <div class="md:text-right md:pr-8">
                            <time class="block mb-1 text-sm font-normal leading-none text-slate-500">Jun 2023 ‚Äì Oct 2024 (1 yr 5 mos)</time>
                            <h3 class="text-xl font-semibold text-[#005F73]">Java Software Engineer</h3>
                            <p class="text-sm font-normal text-slate-500">SWIFT, Brussels</p>
                        </div>
                        <div class="p-4 bg-white rounded-lg border border-slate-200 shadow-sm mt-2 md:mt-0">
                            <ul class="list-disc ml-4 text-base font-normal text-slate-600 space-y-1">
                                <li>Implemented and maintained <strong>SWIFT MT/MX messaging protocols</strong> on the Alliance Messaging Hub (AMH) for secure financial communication.</li>
                                <li>Contributed to <strong>Microservices design</strong> and enterprise security upgrades for high-volume, mission-critical transaction processing systems (using <strong>Java EE/Oracle SQL</strong>).</li>
                            </ul>
                            <p class="text-xs text-slate-500 mt-2">Skills: Java EE, Messaging Protocols, Data Security, Oracle SQL, IBM MQ, API Development, Agile.</p>
                        </div>
                    </div>
                </div>
                <!-- EXPERIENCE 4: Software Engineer & Instructor (INTEC BRUSSEL) -->
                <div class="mb-10 ml-8 md:ml-0">
                    <div class="absolute -left-1.5 mt-1.5 w-3 h-3 bg-[#005F73] rounded-full"></div>
                    <div class="md:grid md:grid-cols-2 md:gap-8">
                        <div class="md:text-right md:pr-8">
                            <time class="block mb-1 text-sm font-normal leading-none text-slate-500">Mar 2020 ‚Äì Jun 2023 (3 yrs 4 mos)</time>
                            <h3 class="text-xl font-semibold text-[#005F73]">Software Engineer</h3>
                            <span class="text-sm font-medium text-[#0A9396]">& Instructor (INTEC)</span>
                        </div>
                        <div class="p-4 bg-white rounded-lg border border-slate-200 shadow-sm mt-2 md:mt-0">
                            <ul class="list-disc ml-4 text-base font-normal text-slate-600 space-y-1">
                                <li>Developed and maintained full-stack internal applications (<strong>Student Management, QR Attendance</strong>) using <strong>Spring Boot</strong>, <strong>Spring Cloud</strong>, and <strong>Vaadin</strong>.</li>
                                <li>Delivered dual-language curriculum (<strong>Java EE, Spring Boot, Python</strong>) to over 100 professional developers, achieving a <strong>95% job placement rate</strong>.</li>
                            </ul>
                            <p class="text-xs text-slate-500 mt-2">Skills: Spring Boot, Microservices, Spring Cloud, Java EE, Angular, REST Services, Powershell, Mentoring.</p>
                        </div>
                    </div>
                </div>
                <!-- EXPERIENCE 5: Java Software Engineer (VDAB) -->
                <div class="mb-10 ml-8 md:ml-0">
                    <div class="absolute -left-1.5 mt-1.5 w-3 h-3 bg-[#005F73] rounded-full"></div>
                    <div class="md:grid md:grid-cols-2 md:gap-8">
                        <div class="md:text-right md:pr-8">
                            <time class="block mb-1 text-sm font-normal leading-none text-slate-500">Apr 2019 ‚Äì Oct 2019 (7 mos)</time>
                            <h3 class="text-xl font-semibold text-[#005F73]">Java Software Engineer</h3>
                            <p class="text-sm font-normal text-slate-500">VDAB, Brussels</p>
                        </div>
                        <div class="p-4 bg-white rounded-lg border border-slate-200 shadow-sm mt-2 md:mt-0">
                            <ul class="list-disc ml-4 text-base font-normal text-slate-600 space-y-1">
                                <li>Migrated legacy employment system data formats and schemas to modern RESTful <strong>Spring Boot Applications</strong>.</li>
                                <li>Contributed to Java development of <strong>matching algorithms</strong> and API services for candidate processing against the specialized <strong>Elise</strong> database.</li>
                            </ul>
                            <p class="text-xs text-slate-500 mt-2">Skills: Spring Boot, REST APIs, Java EE, Data Migration, JDBC, Scrum.</p>
                        </div>
                    </div>
                </div>
                <!-- EXPERIENCE 6: Software Engineer (VKODIT) -->
                <div class="ml-8 md:ml-0">
                    <div class="absolute -left-1.5 mt-1.5 w-3 h-3 bg-[#005F73] rounded-full"></div>
                    <div class="md:grid md:grid-cols-2 md:gap-8">
                        <div class="md:text-right md:pr-8">
                            <time class="block mb-1 text-sm font-normal leading-none text-slate-500">Jan 2017 ‚Äì Dec 2018 (2 yrs)</time>
                            <h3 class="text-xl font-semibold text-[#005F73]">Software Engineer</h3>
                            <span class="text-sm font-medium text-[#0A9396]">(Self-employed, VKODIT)</span>
                        </div>
                        <div class="p-4 bg-white rounded-lg border border-slate-200 shadow-sm mt-2 md:mt-0">
                            <ul class="list-disc ml-4 text-base font-normal text-slate-600 space-y-1">
                                <li>Developed <strong>C# .Net desktop applications</strong> and powershell automation tools with robust <strong>MSSQL</strong> database integration for small enterprises.</li>
                                <li>Managed development, project delivery, and client acquisition for <strong>E-Commerce solutions</strong> (WordPress/WooCommerce with custom PHP plugins).</li>
                            </ul>
                            <p class="text-xs text-slate-500 mt-2">Skills: C#, MSSQL, Java, PHP, E-Commerce, Software Project Management, Entrepreneurship.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- NEW BLOCK: Architectural Competencies -->
        <section id="architecture" class="mb-16">
            <div class="max-w-5xl mx-auto">
                <h2 class="text-3xl font-bold text-center text-[#005F73] mb-8">Architectural Competencies</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                    <!-- Monolith Card -->
                    <div class="bg-white rounded-xl shadow-lg p-5 border-t-4 border-[#0A9396]">
                        <div class="flex items-start gap-3">
                            <div class="text-2xl" aria-hidden="true">üèõÔ∏è</div>
                            <div>
                                <h3 class="text-lg font-bold text-[#005F73]">Monolith</h3>
                                <p class="text-slate-600 text-sm mt-1">Maintain and evolve cohesive enterprise apps with clear boundaries and layered design.</p>
                                <div class="mt-3 flex flex-wrap gap-2">
                                    <span class="text-[11px] px-2 py-1 rounded-full bg-[#f0f9fa] text-[#0A9396] font-semibold">Layered</span>
                                    <span class="text-[11px] px-2 py-1 rounded-full bg-slate-100 text-slate-700 font-semibold">Modularization</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Microservices Card -->
                    <div class="bg-white rounded-xl shadow-lg p-5 border-t-4 border-[#EE9B00]">
                        <div class="flex items-start gap-3">
                            <div class="text-2xl" aria-hidden="true">üß©</div>
                            <div>
                                <h3 class="text-lg font-bold text-[#005F73]">Microservices</h3>
                                <p class="text-slate-600 text-sm mt-1">Design resilient, independently deployable services with strong observability.</p>
                                <div class="mt-3 flex flex-wrap gap-2">
                                    <span class="text-[11px] px-2 py-1 rounded-full bg-[#f0f9fa] text-[#0A9396] font-semibold">Service Discovery</span>
                                    <span class="text-[11px] px-2 py-1 rounded-full bg-[#fff2e6] text-[#CA6702] font-semibold">API Gateway</span>
                                    <span class="text-[11px] px-2 py-1 rounded-full bg-slate-100 text-slate-700 font-semibold">Observability</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Modulith Card -->
                    <div class="bg-white rounded-xl shadow-lg p-5 border-t-4 border-[#94D2BD]">
                        <div class="flex items-start gap-3">
                            <div class="text-2xl" aria-hidden="true">üß±</div>
                            <div>
                                <h3 class="text-lg font-bold text-[#005F73]">Modulith</h3>
                                <p class="text-slate-600 text-sm mt-1">Build well-structured Spring applications with explicit module boundaries.</p>
                                <div class="mt-3 flex flex-wrap gap-2">
                                    <span class="text-[11px] px-2 py-1 rounded-full bg-[#f0f9fa] text-[#0A9396] font-semibold">DDD</span>
                                    <span class="text-[11px] px-2 py-1 rounded-full bg-[#fef7ec] text-[#EE9B00] font-semibold">Bounded Contexts</span>
                                    <span class="text-[11px] px-2 py-1 rounded-full bg-slate-100 text-slate-700 font-semibold">Spring Modulith</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- SCS Card -->
                    <div class="bg-white rounded-xl shadow-lg p-5 border-t-4 border-[#CA6702]">
                        <div class="flex items-start gap-3">
                            <div class="text-2xl" aria-hidden="true">üì¶</div>
                            <div>
                                <h3 class="text-lg font-bold text-[#005F73]">Self-Contained Services (SCS)</h3>
                                <p class="text-slate-600 text-sm mt-1">Expertise in developing vertically integrated services with dedicated frontend/backend stacks.</p>
                                <div class="mt-3 flex flex-wrap gap-2">
                                    <span class="text-[11px] px-2 py-1 rounded-full bg-[#f0f9fa] text-[#0A9396] font-semibold">Java EE</span>
                                    <span class="text-[11px] px-2 py-1 rounded-full bg-[#eef2ff] text-[#005F73] font-semibold">Vaadin</span>
                                    <span class="text-[11px] px-2 py-1 rounded-full bg-slate-100 text-slate-700 font-semibold">Independent Stack</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="text-xs text-slate-500 mt-4 text-center">Also familiar with: Event-Driven Architecture, Service Mesh, and asynchronous messaging patterns.</p>
            </div>
        </section>

        <section id="projects" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#005F73] mb-8">Top 6 GitHub Open Source Projects</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white rounded-xl shadow-lg p-6 md:col-span-2">
                    <p class="text-slate-600">Highlighting contributions across core Java frameworks, financial integration, and applied AI/ML in high-performance contexts (GitHub: codesapienbe).</p>
                </div>

                <div class="bg-white rounded-xl shadow-lg p-6 project-card-border" style="border-left-color: #005F73;">
                    <h4 class="text-lg font-semibold text-[#005F73]">1. Spring Vision Framework üëÅÔ∏è</h4>
                    <p class="text-sm font-medium text-[#0A9396] mb-2">Technologies: Spring Boot 3.x, Java 21, OpenCV | <a href="https://github.com/codesapienbe/spring-vision" target="_blank" class="text-[#EE9B00] hover:text-[#CA6702]">GitHub Link</a></p>
                    <p class="text-slate-600 text-sm">A production-ready computer vision framework delivered as a <strong>Spring Boot Starter</strong>, enabling zero-configuration object detection, face analysis, and intelligent applications with enterprise security and high-performance pluggable backends.</p>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 project-card-border" style="border-left-color: #0A9396;">
                    <h4 class="text-lg font-semibold text-[#005F73]">2. Spring Finqube ISO 20022 Starter üí∞</h4>
                    <p class="text-sm font-medium text-[#0A9396] mb-2">Technologies: Spring Boot 3.2, Financial Integration | <a href="https://github.com/codesapienbe/spring-finqube" target="_blank" class="text-[#EE9B00] hover:text-[#CA6702]">GitHub Link</a></p>
                    <p class="text-slate-600 text-sm">Developed a production-ready Spring Boot starter for **financial messaging** (ISO 20022 standard), featuring enterprise-grade security, auto-configuration, and a pluggable transport protocol pipeline.</p>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 project-card-border" style="border-left-color: #94D2BD;">
                    <h4 class="text-lg font-semibold text-[#005F73]">3. Food Score MLOps Pipeline üìä</h4>
                    <p class="text-sm font-medium text-[#0A9396] mb-2">Technologies: Spring Boot, PostgreSQL, OpenAPI | <a href="https://github.com/codesapienbe/food-score" target="_blank" class="text-[#EE9B00] hover:text-[#CA6702]">GitHub Link</a></p>
                    <p class="text-slate-600 text-sm">Architected a complete enterprise application with structured JSON logging and <strong>OpenAPI</strong> documentation, demonstrating a full-cycle <strong>MLOps</strong> pipeline integration.</p>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 project-card-border" style="border-left-color: #EE9B00;">
                    <h4 class="text-lg font-semibold text-[#005F73]">4. Instyper - Voice-to-Text Desktop App üéôÔ∏è</h4>
                    <p class="text-sm font-medium text-[#0A9396] mb-2">Technologies: Java, Vosk, Whisper, GUI | <a href="https://github.com/codesapienbe/Instyper" target="_blank" class="text-[#EE9B00] hover:text-[#CA6702]">GitHub Link</a></p>
                    <p class="text-slate-600 text-sm">A lightweight, privacy-first desktop application that turns your voice into text instantly. It works offline (Vosk) and supports modern online models (Whisper) and live translation.</p>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 project-card-border" style="border-left-color: #CA6702;">
                    <h4 class="text-lg font-semibold text-[#005F73]">5. Stegnocchi - EXIF Steganography App üñºÔ∏è</h4>
                    <p class="text-sm font-medium text-[#0A9396] mb-2">Technologies: Core Java, Image Processing, Security | <a href="https://github.com/codesapienbe/Stegnocchi" target="_blank" class="text-[#EE9B00] hover:text-[#CA6702]">GitHub Link</a></p>
                    <p class="text-slate-600 text-sm">A security tool built in **Core Java** focused on hiding data within image metadata (**EXIF Steganography**), showcasing low-level data manipulation and security principles.</p>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 project-card-border" style="border-left-color: #AE2012;">
                    <h4 class="text-lg font-semibold text-[#005F73]">6. DeepVoice - Voice Analysis Library üé§</h4>
                    <p class="text-sm font-medium text-[#0A9396] mb-2">Technologies: Python, AI/ML, Signal Processing | <a href="https://github.com/codesapienbe/DeepVoice" target="_blank" class="text-[#EE9B00] hover:text-[#CA6702]">GitHub Link</a></p>
                    <p class="text-slate-600 text-sm">A comprehensive <strong>Python library</strong> for voice analysis, processing, and <strong>speaker identification</strong>, reinforcing active interest and competency in the AI/ML domain.</p>
                </div>
            </div>
        </section>

        <!-- ENHANCED BLOCK: Professional Development & Training -->
        <section id="development" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#005F73] mb-8">Professional Development & Training</h2>
            <div class="max-w-5xl mx-auto">
                <!-- Grid of small detailed cards -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 items-stretch auto-rows-fr">
                    <!-- Certifications -->
                    <div class="bg-white rounded-xl shadow-lg p-4 border border-slate-200 h-full">
                        <div class="text-[12px] font-semibold text-[#AE2012]">Expert Certification</div>
                        <h3 class="text-sm font-bold text-slate-800 mt-1">SWIFT Messaging Systems</h3>
                        <p class="text-xs text-slate-500">Internal Training (MX/MT, ISO 20022, AMH)</p>
                        <div class="mt-3 flex flex-wrap gap-2">
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#fff2e6] text-[#CA6702] font-semibold">SWIFT</span>
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#f6f7fb] text-[#005F73] font-semibold">ISO 20022</span>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-lg p-4 border border-slate-200 h-full">
                        <div class="text-[12px] font-semibold text-[#0A9396]">Certification</div>
                        <h3 class="text-sm font-bold text-slate-800 mt-1">Agile in Software Engineering</h3>
                        <p class="text-xs text-slate-500">SWIFT ‚Ä¢ Internal Training</p>
                        <div class="mt-3 flex flex-wrap gap-2">
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#fef7ec] text-[#EE9B00] font-semibold">Agile</span>
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#f0f9fa] text-[#0A9396] font-semibold">Team Practices</span>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-lg p-4 border border-slate-200 h-full">
                        <div class="text-[12px] font-semibold text-[#0A9396]">Certification</div>
                        <h3 class="text-sm font-bold text-slate-800 mt-1">Spring Boot and Angular</h3>
                        <p class="text-xs text-slate-500">VDAB ‚Ä¢ Internal Training</p>
                        <div class="mt-3 flex flex-wrap gap-2">
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#f0f9fa] text-[#0A9396] font-semibold">Spring</span>
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#eef2ff] text-[#005F73] font-semibold">Angular</span>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-lg p-4 border border-slate-200 h-full">
                        <div class="text-[12px] font-semibold text-[#0A9396]">Certification</div>
                        <h3 class="text-sm font-bold text-slate-800 mt-1">Enterprise Java Development</h3>
                        <p class="text-xs text-slate-500">INTEC Brussel ‚Ä¢ Training</p>
                        <div class="mt-3 flex flex-wrap gap-2">
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#f0f9fa] text-[#0A9396] font-semibold">Java</span>
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#f6f7fb] text-[#005F73] font-semibold">Spring</span>
                        </div>
                    </div>
                    <!-- Coursework -->
                    <div class="bg-white rounded-xl shadow-lg p-4 border border-slate-200 h-full">
                        <div class="text-[12px] font-semibold text-[#0A9396]">Coursework</div>
                        <h3 class="text-sm font-bold text-slate-800 mt-1">C and System Programming</h3>
                        <p class="text-xs text-slate-500">Istanbul, Turkiye</p>
                        <div class="mt-3 flex flex-wrap gap-2">
                            <span class="text-[10px] px-2 py-1 rounded-full bg-slate-100 text-slate-700 font-semibold">C</span>
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#fef7ec] text-[#EE9B00] font-semibold">Systems</span>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-lg p-4 border border-slate-200 h-full">
                        <div class="text-[12px] font-semibold text-[#0A9396]">Coursework</div>
                        <h3 class="text-sm font-bold text-slate-800 mt-1">System and Networking</h3>
                        <p class="text-xs text-slate-500">Bursa, Turkiye</p>
                        <div class="mt-3 flex flex-wrap gap-2">
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#f0f9fa] text-[#0A9396] font-semibold">Networking</span>
                            <span class="text-[10px] px-2 py-1 rounded-full bg-slate-100 text-slate-700 font-semibold">Linux</span>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-lg p-4 border border-slate-200 h-full">
                        <div class="text-[12px] font-semibold text-[#0A9396]">Coursework</div>
                        <h3 class="text-sm font-bold text-slate-800 mt-1">Graphical and Web Design</h3>
                        <p class="text-xs text-slate-500">Istanbul, Turkiye</p>
                        <div class="mt-3 flex flex-wrap gap-2">
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#eef2ff] text-[#005F73] font-semibold">Web</span>
                            <span class="text-[10px] px-2 py-1 rounded-full bg-slate-100 text-slate-700 font-semibold">Design</span>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow-lg p-4 border border-slate-200 h-full">
                        <div class="text-[12px] font-semibold text-[#0A9396]">Self-Study</div>
                        <h3 class="text-sm font-bold text-slate-800 mt-1">Agile & Security Foundations</h3>
                        <p class="text-xs text-slate-500">Independent</p>
                        <div class="mt-3 flex flex-wrap gap-2">
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#fef7ec] text-[#EE9B00] font-semibold">Agile</span>
                            <span class="text-[10px] px-2 py-1 rounded-full bg-[#fff2e6] text-[#CA6702] font-semibold">Security</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ENHANCED BLOCK: Education & Languages -->
        <section id="education" class="mb-16">
            <h2 class="text-3xl font-bold text-center text-[#005F73] mb-8">Education & Global Competencies</h2>
            <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Academic History Card (Spanning 2 columns) -->
                <div class="bg-white rounded-xl shadow-lg p-6 border-t-4 border-[#0A9396] md:col-span-2">
                    <h3 class="text-xl font-bold text-[#0A9396] mb-4">Academic History üéì</h3>
                    <div class="space-y-4">
                        <div>
                            <p class="text-lg font-semibold text-slate-800">Postgraduate AI & Machine Learning (Completed)</p>
                            <p class="text-sm text-slate-600">Erasmushogeschool Brussel, Belgium</p>
                        </div>
                        <div>
                            <p class="text-lg font-semibold text-slate-800">MSc in Computing and Information Systems (Incomplete)</p>
                            <p class="text-sm text-slate-600">Queen Mary, University of London, UK (2013)</p>
                        </div>
                        <div>
                            <p class="text-lg font-semibold text-slate-800">Bachelor Degree, Tourism and Hotel Management</p>
                            <p class="text-sm text-slate-600">Beykent University, Istanbul, Turkiye (2010)</p>
                        </div>
                    </div>
                </div>
                <!-- Languages & Domain Card -->
                <div class="bg-white rounded-xl shadow-lg p-6 border-t-4 border-[#005F73]">
                    <h3 class="text-xl font-bold text-[#0A9396] mb-4">Languages & Domain üó£Ô∏è</h3>
                    <div class="space-y-3">
                        <p class="text-base font-semibold text-slate-800">Language Proficiency</p>
                        <ul class="list-none space-y-1 text-sm text-slate-700">
                            <li class="pl-4 relative before:content-['‚Ä¢'] before:absolute before:left-0 before:text-[#005F73] before:font-bold">**Turkish**: Native</li>
                            <li class="pl-4 relative before:content-['‚Ä¢'] before:absolute before:left-0 before:text-[#005F73] before:font-bold">**English**: Fluent</li>
                            <li class="pl-4 relative before:content-['‚Ä¢'] before:absolute before:left-0 before:text-[#005F73] before:font-bold">**Dutch**: Professional</li>
                        </ul>
                        <p class="text-base font-semibold text-slate-800 mt-4">Domain Expertise</p>
                        <ul class="list-none space-y-1 text-sm text-slate-700">
                            <li class="pl-4 relative before:content-['‚Ä¢'] before:absolute before:left-0 before:text-[#005F73] before:font-bold">Financial Messaging (SWIFT, ISO 20022)</li>
                            <li class="pl-4 relative before:content-['‚Ä¢'] before:absolute before:left-0 before:text-[#005F73] before:font-bold">Enterprise Software & SaaS</li>
                            <li class="pl-4 relative before:content-['‚Ä¢'] before:absolute before:left-0 before:text-[#005F73] before:font-bold">Technical Training</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center mt-12 pt-8 border-t border-slate-200">
        <div class="flex justify-center space-x-6 text-slate-600">
            <a href="mailto:yilmaz@codesapien.net" class="hover:text-[#0A9396] transition duration-200" title="Email: yilmaz@codesapien.net">üìß Email</a>
            <a href="https://codesapien.net" target="_blank" class="hover:text-[#0A9396] transition duration-200" title="Portfolio: codesapien.net">üåê Portfolio</a>
            <a href="https://www.linkedin.com/in/codesapienbe" target="_blank" class="hover:text-[#0A9396] transition duration-200" title="LinkedIn: codesapienbe">üíº LinkedIn</a>
            <a href="https://github.com/codesapienbe" target="_blank" class="hover:text-[#0A9396] transition duration-200" title="GitHub: codesapienbe">üêô GitHub</a>
        </div>
        <p class="text-sm text-slate-500 mt-4">Visual Resume for Yilmaz Mustafa.</p>
    </footer>
</div>

<script>
    // --- CHART.JS CONFIGURATION ---
    const tooltipTitleCallback = {
        plugins: {
            tooltip: {
                callbacks: {
                    title: function(tooltipItems) {
                        const item = tooltipItems[0];
                        let label = item.chart.data.labels[item.dataIndex];
                        if (Array.isArray(label)) {
                            return label.join(' ');
                        }
                        return label;
                    }
                }
            }
        }
    };

    const colors = {
        primary: '#005F73',
        secondary: '#0A9396',
        accent: '#94D2BD',
        highlight: '#E9D8A6',
        danger1: '#EE9B00',
        danger2: '#CA6702',
        danger3: '#BB3E03',
        danger4: '#AE2012'
    };

    new Chart(document.getElementById('javaSkillsChart'), {
        type: 'doughnut',
        data: {
            labels: ['Spring Boot 3.x', 'Java 17-21+', 'Spring Security', 'Java EE'],
            datasets: [{
                label: 'Java & Enterprise Core',
                data: [40, 45, 10, 5],
                backgroundColor: [colors.primary, colors.secondary, colors.accent, colors.highlight],
                borderColor: '#fff',
                borderWidth: 2
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                ...tooltipTitleCallback.plugins,
                legend: {
                    position: 'bottom',
                },
            }
        }
    });

    new Chart(document.getElementById('apiDbSkillsChart'), {
        type: 'bar',
        data: {
            labels: ['REST APIs', 'PostgreSQL', ['JPA', 'Hibernate'], 'Oracle', 'GraphQL', 'MongoDB'],
            datasets: [{
                label: 'Proficiency',
                data: [95, 85, 90, 75, 70, 65],
                backgroundColor: [colors.primary, colors.secondary, colors.accent, colors.danger2, colors.highlight, colors.danger3],
                borderRadius: 4
            }]
        },
        options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    beginAtZero: true,
                    max: 100,
                    grid: { display: false }
                },
                y: { grid: { display: false } }
            },
            plugins: {
                ...tooltipTitleCallback.plugins,
                legend: {
                    display: false
                }
            }
        }
    });

    new Chart(document.getElementById('devopsSkillsChart'), {
        type: 'radar',
        data: {
            labels: ['Docker', 'Kubernetes', 'Jenkins', 'Terraform', 'CI/CD', 'Architecture'],
            datasets: [{
                label: 'DevOps & Architecture Skills',
                data: [90, 70, 85, 80, 95, 88],
                fill: true,
                backgroundColor: 'rgba(10, 147, 150, 0.2)',
                borderColor: colors.secondary,
                pointBackgroundColor: colors.secondary,
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: colors.secondary
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                ...tooltipTitleCallback.plugins,
                legend: {
                    position: 'bottom',
                },
            },
            scales: {
                r: {
                    angleLines: {
                        color: 'rgba(0, 0, 0, 0.1)'
                    },
                    suggestedMin: 0,
                    suggestedMax: 100,
                    pointLabels: {
                        font: {
                            size: 12
                        }
                    }
                }
            }
        }
    });

    // --- LOCAL SKILL MATCHER DATA & LOGIC ---
    const candidateSkills = [
        'Java 21', 'Java 17', 'Spring Boot 3.x', 'Spring Cloud', 'Spring Security', 'REST', 'SOAP',
        'PostgreSQL', 'Oracle', 'JPA', 'Hibernate', 'GraphQL', 'Docker', 'Kubernetes',
        'Terraform', 'Jenkins', 'CI/CD', 'DevOps', 'Microservices', 'Modulith', 'Monolith', 'SCS',
        'TDD', 'JUnit 5', 'Mockito', 'OpenAPI', 'Swagger', 'Messaging', 'MQ', 'Python', 'Computer Vision',
        'ElasticSearch', 'ZeroMQ', 'C#', 'MSSQL', 'Vaadin', 'React'
    ];

    const experiencePoints = [
        { keyword: 'concurrent users', context: 'Supported 10k+ concurrent users in high-performance Spring Boot apps (Freelance).' },
        { keyword: 'CI/CD', context: 'Orchestrated CI/CD pipelines with Docker and Terraform (Freelance).' },
        { keyword: 'financial messaging', context: 'Maintained mission-critical financial messaging systems (SWIFT AMH).' },
        { keyword: 'security', context: 'Executed security upgrades using cryptographic standards (SWIFT).' },
        { keyword: 'testing', context: 'Implemented robust automated testing strategies (TheMatchBox).' },
        { keyword: 'ElasticSearch', context: 'Developed custom ElasticSearch Java Plugins for search algorithms (TheMatchBox).' },
        { keyword: 'ZeroMQ', context: 'Used ZeroMQ for inter-service communication to reduce latency (TheMatchBox).' },
        { keyword: 'C#', context: 'Developed C# desktop applications with MSSQL database integration (VKODIT).' },
        { keyword: 'Python AI', context: 'Developed Python AI/Computer Vision systems with TensorFlow (Freelance AI).' },
        { keyword: 'starter', context: 'Developed Spring Boot Starter frameworks (Spring Vision, Finqube).' },
        { keyword: 'MQ', context: 'Experienced with IBM MQ and other messaging protocols (SWIFT).' }
    ];

    const companyNameInput = document.getElementById('companyNameInput');
    const companyUrlInput = document.getElementById('companyUrlInput');
    const analyzeButton = document.getElementById('analyzeButton');
    const jobDescriptionInput = document.getElementById('jobDescriptionInput');
    const outputContent = document.getElementById('outputContent');
    const outputPlaceholder = document.getElementById('outputPlaceholder');
    const loadingSpinner = document.getElementById('loadingSpinner');
    const exportContainer = document.getElementById('exportContainer');
    const exportButton = document.getElementById('exportButton');

    let lastAnalysisResult = {
        matchScore: 0,
        matchedSkills: [],
        alignmentHits: [],
        jobDescription: '',
        companyName: '',
        companyUrl: ''
    };

    const markdownToHtml = (markdownText) => {
        let html = markdownText;

        // Convert newlines to <br> for basic formatting
        html = html.replace(/(\r\n|\n|\r)/gm, '<br>');

        // Bold: **text** or __text__ to <strong>
        html = html.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        html = html.replace(/__(.*?)__/g, '<strong>$1</strong>');

        // Italic: *text* or _text_ to <em>
        html = html.replace(/\*(.*?)\*/g, '<em>$1</em>');
        html = html.replace(/_(.*?)_/g, '<em>$1</em>');

        return html;
    };

    const runLocalMatch = (jobDescription, companyName, companyUrl) => {
        const jdLower = jobDescription.toLowerCase();
        const skillHits = {};
        let totalMatchCount = 0;

        // 1. Convert Job Description for display (Preview logic)
        const formattedJobDescription = markdownToHtml(jobDescription);

        // Set input field as preview and read-only
        jobDescriptionInput.innerHTML = formattedJobDescription;
        jobDescriptionInput.readOnly = true;
        companyNameInput.readOnly = true;
        companyUrlInput.readOnly = true;


        // 2. Calculate Skill Matches
        candidateSkills.forEach(skill => {
            const skillLower = skill.toLowerCase();
            const regex = new RegExp('\\b' + skillLower.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + '\\b', 'g');
            if (jdLower.match(regex)) {
                skillHits[skill] = (skillHits[skill] || 0) + 1;
                totalMatchCount++;
            }
        });

        // Sort matched skills by hit count (and then alphabetically)
        const matchedSkills = Object.entries(skillHits)
            .sort(([, a], [, b]) => b - a)
            .slice(0, 5)
            .map(([skill]) => skill);

        // 3. Calculate Contextual Alignment
        const alignmentHits = [];
        experiencePoints.forEach(point => {
            if (jdLower.includes(point.keyword.toLowerCase())) {
                alignmentHits.push(point.context);
            }
        });

        // 4. Generate Output and Update Cache
        const matchScore = Math.min(Math.round((totalMatchCount / 10) * 100), 100);

        lastAnalysisResult = {
            matchScore,
            matchedSkills,
            alignmentHits,
            jobDescription,
            companyName,
            companyUrl
        };

        // Generate Simulated Security Report
        const securityReport = generateSimulatedSecurityReport(companyUrl);

        // Format HTML Output
        const formattedSkills = matchedSkills.map(s => `<li>${s}</li>`).join('\n') || '<li>No direct keyword matches found.</li>';
        const formattedAlignment = alignmentHits.map(h => `<li>Relevant Experience: ${h}</li>`).join('\n') || '<li>No direct experience context matches found.</li>';
        const formattedSecurity = securityReport.map(item => `<li class="text-xs">${item.status} ${item.check}: ${item.result}</li>`).join('');


        const analysisOutput = `
                <p><strong>Match Score: ${matchScore}% üéØ</strong><br>
                (Based on alignment of top 20 prioritized keywords)</p>

                <hr class="my-3 border-t border-slate-300">

                <p><strong>Top ${matchedSkills.length} Matching Skills/Keywords:</strong></p>
                <ul>
                    ${formattedSkills}
                </ul>

                <hr class="my-3 border-t border-slate-300">

                <p><strong>Key Experience Alignment:</strong></p>
                <ul>
                    ${formattedAlignment}
                </ul>

                <hr class="my-3 border-t border-slate-300">

                <p><strong>Simulated Initial Security Assessment:</strong></p>
                <ul class="space-y-1">
                    ${formattedSecurity}
                </ul>
                <p class="text-xs text-slate-500 mt-2"><em>*This is a simulated report for presentation purposes only, based on assumed security best practices.</em></p>
            `;


        outputContent.innerHTML = `<div class="bg-slate-50 p-4 rounded-lg border border-slate-200 overflow-x-auto text-sm">${analysisOutput}</div>`;
        exportContainer.classList.remove('hidden');
    };

    // --- SIMULATED SECURITY CHECK LOGIC ---
    const generateSimulatedSecurityReport = (url) => {
        const isHttps = url.toLowerCase().startsWith('https');
        const domain = url.replace(/https?:\/\//i, '').split('/')[0];

        const results = [
            {
                check: 'HTTPS Encryption (TLS/SSL)',
                result: isHttps ? 'Strong baseline security detected.' : 'Missing. Recommended: Implement HTTPS (TLS 1.2+).',
                status: isHttps ? '‚úÖ' : '‚ö†Ô∏è'
            },
            {
                check: 'HSTS Header Enforcement',
                result: 'Assumed strong. Promotes use of secure connections only.',
                status: '‚úÖ'
            },
            {
                check: 'Content Security Policy (CSP)',
                result: 'Assumed basic. Reduces risks from cross-site scripting (XSS) and injection attacks.',
                status: '‚òëÔ∏è'
            },
            {
                check: 'Subresource Integrity (SRI) Check',
                result: 'Assumed compliance. Verifies external scripts haven\'t been tampered with.',
                status: '‚úÖ'
            },
            {
                check: 'Domain Security Health',
                result: `Domain ${domain} is assumed to have standard security headers.`,
                status: '‚ÑπÔ∏è'
            },
        ];
        return results;
    };

    analyzeButton.addEventListener('click', () => {
        const jobDescription = jobDescriptionInput.value.trim();
        const companyName = companyNameInput.value.trim();
        const companyUrl = companyUrlInput.value.trim();

        if (!jobDescription || !companyName || !companyUrl) {
            outputContent.innerHTML = '<span class="text-[#AE2012]">Please fill in the Company Name, URL, and Job Description to run the analysis.</span>';
            outputPlaceholder.style.display = 'none';
            exportContainer.classList.add('hidden');
            return;
        }

        loadingSpinner.style.display = 'inline-block';
        analyzeButton.disabled = true;
        outputPlaceholder.style.display = 'none';
        outputContent.innerHTML = '';

        setTimeout(() => {
            runLocalMatch(jobDescription, companyName, companyUrl);
            loadingSpinner.style.display = 'none';
            analyzeButton.disabled = false;
        }, 100);
    });

    // Add handler to reset state when user clears the input
    const resetState = () => {
        jobDescriptionInput.readOnly = false;
        companyNameInput.readOnly = false;
        companyUrlInput.readOnly = false;
        jobDescriptionInput.innerHTML = jobDescriptionInput.value; // Restore raw text content
        outputPlaceholder.style.display = 'block';
        outputContent.innerHTML = '';
        exportContainer.classList.add('hidden');
    }

    jobDescriptionInput.addEventListener('input', () => {
        if (jobDescriptionInput.readOnly && jobDescriptionInput.value.trim() !== '') {
            // If the user starts typing in the read-only preview, reset the state
            resetState();
        } else if (jobDescriptionInput.value.trim() === '') {
            // If input is cleared, ensure a full reset
            resetState();
        }
    });

    // Also allow clearing if name/url change after analysis
    companyNameInput.addEventListener('input', () => { if (jobDescriptionInput.readOnly) resetState(); });
    companyUrlInput.addEventListener('input', () => { if (jobDescriptionInput.readOnly) resetState(); });

    // Hook up export button for match report
    if (exportButton) {
        exportButton.addEventListener('click', () => {
            exportMatchReport();
        });
    }


    // --- WORD EXPORT LOGIC ---
    const exportMatchReport = () => {
        const { matchScore, matchedSkills, alignmentHits, jobDescription, companyName, companyUrl } = lastAnalysisResult;

        // Convert raw job description using markdownToHtml for the Word document
        const htmlJobDescription = markdownToHtml(jobDescription);

        const htmlSkills = matchedSkills.map(s => `<li style="margin-bottom: 8px; padding: 5px; background-color: #f0f9fa; border-left: 3px solid #0A9396;">${s}</li>`).join('');
        const htmlAlignment = alignmentHits.map(h => `<li style="margin-bottom: 8px; padding: 5px; background-color: #fef7ec; border-left: 3px solid #EE9B00;">${h}</li>`).join('');

        const securityReport = generateSimulatedSecurityReport(companyUrl);
        const htmlSecurity = securityReport.map(item => `
                <div style="display:flex; gap:12px; align-items:flex-start; padding:10px 8px; border-bottom:1px solid #eee;">
                    <div style="width:8%; font-size:16px; text-align:center;">${item.status}</div>
                    <div style="width:35%; font-weight:700; color:#005F73;">${item.check}</div>
                    <div style="flex:1 1 auto; color:#333;">${item.result}</div>
                </div>
            `).join('');

        // Create a visual score indicator
        const scoreColor = matchScore >= 80 ? '#2D6A4F' : matchScore >= 60 ? '#EE9B00' : matchScore >= 40 ? '#CA6702' : '#AE2012';
        const scoreLabel = matchScore >= 80 ? 'Excellent Match' : matchScore >= 60 ? 'Good Match' : matchScore >= 40 ? 'Moderate Match' : 'Limited Match';

        const docContent = `
                <html lang='en' xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>
                <head>
                    <meta charset='utf-8'>
                    <title>Skill Match Report - Yilmaz Mustafa</title>
                    <style>
                        body {
                            font-family: 'Segoe UI', Arial, sans-serif;
                            line-height: 1.6;
                            max-width: 850px;
                            margin: 30px auto;
                            color: #333;
                            background-color: #fff;
                        }
                        h1 {
                            color: #005F73;
                            border-bottom: 4px solid #005F73;
                            padding-bottom: 12px;
                            margin-top: 0;
                            font-size: 28pt;
                            letter-spacing: -0.5px;
                        }
                        h2 {
                            color: #0A9396;
                            border-left: 5px solid #0A9396;
                            margin-top: 30px;
                            margin-bottom: 15px;
                            font-size: 16pt;
                            background-color: #f7fcfc;
                            padding: 10px 12px;
                        }
                        h3 {
                            margin-top: 20px;
                            font-size: 12pt;
                            color: #005F73;
                        }
                        .header {
                            text-align: center;
                            margin-bottom: 40px;
                            background: linear-gradient(135deg, #f0f9fa 0%, #fef7ec 100%);
                            padding: 30px;
                            border-radius: 8px;
                        }
                        .header h1 {
                            font-size: 32pt;
                            border: none;
                            margin-bottom: 8px;
                        }
                        .contact {
                            font-size: 11pt;
                            color: #666;
                            margin-top: 10px;
                            line-height: 1.8;
                        }
                        .score-container {
                            text-align: center;
                            background-color: ${scoreColor};
                            color: white;
                            padding: 25px;
                            border-radius: 8px;
                            margin: 20px 0;
                        }
                        .score {
                            font-size: 48pt;
                            font-weight: bold;
                            margin: 0;
                            line-height: 1;
                        }
                        .score-label {
                            font-size: 14pt;
                            margin-top: 8px;
                            opacity: 0.95;
                        }
                        .company-info {
                            background-color: #f7f7f7;
                            padding: 15px;
                            border-radius: 6px;
                            border-left: 4px solid #94D2BD;
                        }
                        .job-desc {
                            border: 2px solid #e0e0e0;
                            padding: 20px;
                            background: #fafafa;
                            margin-bottom: 20px;
                            border-radius: 6px;
                            line-height: 1.7;
                        }
                        ul {
                            padding-left: 0;
                            list-style-type: none;
                        }
                        li {
                            margin-bottom: 8px;
                        }
                        .table-container {
                            width: 100%;
                            border-collapse: collapse;
                            margin-top: 15px;
                        }
                        .table-container thead {
                            background-color: #005F73;
                            color: white;
                        }
                        .table-container th {
                            padding: 12px 8px;
                            text-align: left;
                            font-weight: bold;
                        }
                        .footer-note {
                            margin-top: 40px;
                            padding: 15px;
                            background-color: #fef7ec;
                            border-left: 4px solid #EE9B00;
                            font-size: 10pt;
                            color: #666;
                            border-radius: 4px;
                        }
                        .section-badge {
                            display: inline-block;
                            background-color: #94D2BD;
                            color: #005F73;
                            padding: 4px 12px;
                            border-radius: 12px;
                            font-size: 9pt;
                            font-weight: bold;
                            margin-left: 10px;
                        }
                    </style>
                </head>
                <body>
                    <div class="header">
                        <h1>Skill Match Analysis Report</h1>
                        <p style="font-size: 14pt; color: #0A9396; font-weight: 600; margin: 5px 0;">Yilmaz Mustafa</p>
                        <p style="font-size: 12pt; color: #005F73; margin: 5px 0;">Java & Spring Software Engineer</p>
                        <p class="contact">
                            üìß yilmaz@codesapien.net | üíº LinkedIn: codesapienbe | üåê codesapien.net
                        </p>
                    </div>

                    <h2>üè¢ Target Company Profile</h2>
                    <div class="company-info" style="padding:12px; border-radius:6px;">
                        <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
                            <div style="width:28%; font-weight:700; color:#005F73;">Company Name:</div>
                            <div style="flex:1 1 auto; color:#333;">${companyName}</div>
                        </div>
                        <div style="height:8px;"></div>
                        <div style="display:flex; gap:12px; align-items:center; flex-wrap:wrap;">
                            <div style="width:28%; font-weight:700; color:#005F73;">Website:</div>
                            <div style="flex:1 1 auto;"><a href="${companyUrl}" style="color:#0A9396; text-decoration:none;">${companyUrl}</a></div>
                        </div>
                    </div>

                    <h2>üéØ Overall Match Score</h2>
                    <div class="score-container">
                        <div class="score">${matchScore}%</div>
                        <div class="score-label">${scoreLabel}</div>
                    </div>

                    <h2>üìã Job Description Analysis</h2>
                    <div class="job-desc">${htmlJobDescription}</div>

                    <h2>üí° Technical Skills Match <span class="section-badge">${matchedSkills.length} Skills Identified</span></h2>
                    <p style="font-size: 10pt; color: #666; margin-bottom: 12px;">The following technical skills from Yilmaz Mustafa's profile align with requirements in the job description:</p>
                    <ul>${htmlSkills || '<li style="color: #AE2012;">No direct keyword matches found in the job description.</li>'}</ul>

                    <h2>‚≠ê Experience Alignment <span class="section-badge">${alignmentHits.length} Matches</span></h2>
                    <p style="font-size: 10pt; color: #666; margin-bottom: 12px;">Direct professional experience relevant to the job requirements:</p>
                    <ul>${htmlAlignment || '<li style="color: #AE2012;">No contextual experience matches found.</li>'}</ul>

                    <h2>üîí Preliminary Security Assessment</h2>
                    <div style="margin-top:10px; border:1px solid #e6e6e6; border-radius:6px; overflow:hidden;">
                        <div style="background:#005F73; color:white; padding:10px 12px; font-weight:700; display:flex; gap:12px;">
                            <div style="width:8%; text-align:center;">Status</div>
                            <div style="width:35%;">Security Check</div>
                            <div style="flex:1 1 auto;">Assessment Result</div>
                        </div>
                        <div style="padding:8px 12px; background:#fff;">${htmlSecurity}</div>
                    </div>
                    <div class="footer-note">
                        <strong>‚ö†Ô∏è Note:</strong> This security assessment is simulated for demonstration purposes. A comprehensive security audit requires dedicated tools and server-side analysis.
                    </div>

                    <div class="footer-note" style="background-color: #f0f9fa; border-left-color: #0A9396; margin-top: 15px;">
                        <strong>üìä Report Metadata:</strong><br>
                        Generated: ${new Date().toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        })}<br>
                        Analysis Method: Proprietary client-side keyword matching algorithm<br>
                        Candidate: Yilmaz Mustafa | Contact: yilmaz@codesapien.net
                    </div>
                </body>
                </html>
            `;

        const filename = `Yilmaz_Mustafa_Match_Report_${companyName.replace(/\s+/g, '_')}_${new Date().toISOString().split('T')[0]}.doc`;
        const blob = new Blob(['\ufeff', docContent], {
            type: 'application/msword'
        });

        // Use the standard download method
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = filename;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    };

    // --- FULL RESUME EXPORT LOGIC (Enhanced Visual Design, Light Theme & Stability) ---
    const exportFullResume = () => {
        // Defensive fallbacks
        const skillsArray = Array.isArray(candidateSkills) ? candidateSkills : (window.candidateSkills || ['Java', 'Spring Boot', 'REST', 'SQL']);

        const exportData = {
            title: "Yilmaz Mustafa",
            subtitle: "Java & Spring Software Engineer",
            contact: "yilmaz@codesapien.net ¬∑ codesapien.net ¬∑ LinkedIn: codesapienbe",
            summary: "Software Engineer with 8+ years of expertise in enterprise application development using Java and Spring Boot. Proven track record delivering scalable, high-performance applications and CI/CD automation across Monolith, Microservices, and Modulith architectures.",
            skills: skillsArray,
            experience: [
                { company: "Freelance", title: "Software Engineer", dates: "Feb 2025 ‚Äì May 2025", desc: "Developed **Python AI Applications** (Computer Vision, TensorFlow) and integrated them into **React Native** mobile frontends via FastAPI backends." },
                { company: "theMatchBox, Antwerp", title: "Java Software Engineer", dates: "Oct 2024 ‚Äì Feb 2025", desc: "Developed custom **ElasticSearch Java Plugins** and performed JVM tuning and Spring application performance enhancements, utilizing **ZeroMQ**." },
                { company: "SWIFT, Brussels", title: "Java Software Engineer", dates: "Jun 2023 ‚Äì Oct 2024", desc: "Implemented and maintained **SWIFT MT/MX messaging protocols** on Alliance Messaging Hub (AMH) and contributed to enterprise security upgrades and Microservices design." },
                { company: "INTEC Brussel", title: "Software Engineer & Instructor", dates: "Mar 2020 ‚Äì Jun 2023", desc: "Built Spring Boot/Spring Cloud apps and delivered curriculum to professional developers (Java, Python)." },
                { company: "VDAB, Brussels", title: "Java Software Engineer", dates: "Apr 2019 ‚Äì Oct 2019", desc: "Migrated legacy systems to modern RESTful Spring Boot applications and contributed to matching algorithms." },
                { company: "VKODIT (Self-employed)", title: "Software Engineer", dates: "Jan 2017 ‚Äì Dec 2018", desc: "Developed C# desktop applications, Java automation tools, and managed small enterprise projects (E-Commerce, PHP)." },
            ],
            projects: [
                { name: "Spring Vision Framework", tech: "Spring Boot, Java, OpenCV", desc: "Production-ready computer vision framework as a Spring Boot Starter." },
                { name: "Spring Finqube ISO 20022 Starter", tech: "Spring Boot, Financial Integration", desc: "Spring Boot starter for ISO 20022 financial messaging with secure defaults." },
                { name: "Instyper - Voice-to-Text Desktop App", tech: "Java, Vosk, Whisper", desc: "Privacy-first offline voice transcription desktop app." },
            ],
            education: [
                { title: "Postgraduate AI & Machine Learning", institution: "Erasmushogeschool Brussel" },
                { title: "MSc in Computing and Information Systems (Incomplete)", institution: "Queen Mary, University of London" },
                { title: "Bachelor Degree, Tourism and Hotel Management", institution: "Beykent University" },
            ],
            certifications: [
                "SWIFT Messaging Systems (MX/MT, ISO 20022)",
                "Agile in Software Engineering",
                "Spring Boot and Angular",
            ]
        };

        // Convert **bold** to <strong> for Word HTML compatibility
        const markdownToHtmlExport = (text) => {
            if (!text) return '';
            return text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        };

        // Build experience HTML blocks (single column, page-break safe)
        const htmlExperience = exportData.experience.map((exp, i) => {
            const accentColors = ['#0A9396', '#005F73', '#94D2BD', '#EE9B00'];
            const accent = accentColors[i % accentColors.length];
            const descHtml = markdownToHtmlExport(exp.desc).split(/\.\s+/).filter(Boolean).map(s => `<li style="margin-bottom:6px;">${s.trim()}</li>`).join('');

            return `
                <div style="width:100%; margin-bottom:14px; background:#ffffff; padding:12px; border-radius:6px; border:1px solid #eee; page-break-inside:avoid; border-left:5px solid ${accent};">
                    <table style="width:100%; border-collapse:collapse;">
                        <tr style="vertical-align:top;">
                            <td style="width:70%; padding-right:12px;">
                                <div style="font-size:11pt; font-weight:700; color:#0A9396;">${exp.title}</div>
                                <div style="font-size:10pt; color:#444; margin-top:4px;">${exp.company}</div>
                            </td>
                            <td style="width:30%; text-align:right; font-size:9pt; color:#666;">${exp.dates}</td>
                        </tr>
                    </table>
                    <ul style="margin-top:8px; padding-left:18px; color:#333; font-size:10pt; line-height:1.5;">${descHtml}</ul>
                </div>
            `;
        }).join('');

        const htmlProjects = exportData.projects.map((p, i) => {
            const accentColors = ['#0A9396', '#005F73', '#EE9B00'];
            const accent = accentColors[i % accentColors.length];
            return `
                <div style="margin-bottom:10px; padding:10px; border-radius:6px; background:#fbfcfd; border-left:5px solid ${accent}; page-break-inside:avoid;">
                    <div style="font-weight:700; color:#0A9396; font-size:11pt;">${p.name}</div>
                    <div style="font-size:9pt; color:${accent}; margin-top:4px; font-weight:600;">Tech: ${p.tech}</div>
                    <div style="font-size:10pt; color:#333; margin-top:6px;">${p.desc}</div>
                </div>
            `;
        }).join('');

        const htmlSkills = exportData.skills.map(s => `<span style="display:inline-block; background:#eef9f8; color:#0A9396; padding:6px 10px; border-radius:16px; margin:0 8px 8px 0; font-size:9pt;">${s}</span>`).join('');

        const htmlEducation = exportData.education.map(e => `
            <div style="margin-bottom:8px; padding:10px; background:#ffffff; border-left:5px solid #0A9396; border-radius:6px;">
                <div style="font-weight:700; color:#0A9396; font-size:11pt;">${e.title}</div>
                <div style="font-size:10pt; color:#444; margin-top:4px;">${e.institution}</div>
            </div>
        `).join('');

        const htmlCerts = exportData.certifications.map(c => `<div style="font-size:10pt; color:#333; margin-bottom:6px;">‚Ä¢ ${c}</div>`).join('');

        const safeUrl = (typeof window !== 'undefined' && window.location && window.location.href) ? window.location.href : 'codesapien.net';

        // Build the complete HTML document for Word
        const docHtml = `
            <!doctype html>
            <html>
            <head>
                <meta charset="utf-8">
                <title>Resume - ${exportData.title}</title>
                <meta name="viewport" content="width=device-width, initial-scale=1">
                <style>
                    @page { margin:20mm }
                    body { font-family: 'Segoe UI', 'Calibri', Arial, sans-serif; color:#222; background:#fff; }
                    .container { max-width:900px; margin:18px auto; padding:12px; }
                    .header { padding:18px 12px; border-radius:6px; background:transparent; text-align:left; }
                    .name { font-size:22pt; font-weight:800; color:#0A9396; margin:0 0 4px 0; }
                    .subtitle { font-size:11pt; color:#005F73; margin:0 0 8px 0; font-weight:600; }
                    .contact { font-size: 9.5pt; color: #555; margin-bottom: 12px; }
                    .section-title { display:block; padding:8px 10px; font-weight:700; color:#0A9396; border-left:6px solid #0A9396; background:#fbfcfd; border-radius:4px; margin-bottom:8px; }
                    .card { background:#fff; padding:10px; border-radius:6px; border:1px solid #eee; margin-bottom:10px; }
                    .small { font-size:9.5pt; color:#666; }
                    .muted { color:#666 }
                    /* Avoid breaking important blocks across pages */
                    .no-break { page-break-inside: avoid; }
                    .skills { padding:8px; }
                </style>
            </head>
            <body>
                <div class="container">
                    <div class="header">
                        <div class="name">${exportData.title}</div>
                        <div class="subtitle">${exportData.subtitle}</div>
                        <div class="contact small">${exportData.contact}</div>
                    </div>

                    <div class="section">
                        <div class="section-title">Professional Summary</div>
                        <div class="card small">${exportData.summary}</div>
                    </div>

                    <div class="section">
                        <div class="section-title">Core Technical Skills</div>
                        <div class="card skills">${htmlSkills}</div>
                    </div>

                    <div class="section">
                        <div class="section-title">Professional Experience</div>
                        <div>${htmlExperience}</div>
                    </div>

                    <div class="section">
                        <div class="section-title">Key Projects</div>
                        <div>${htmlProjects}</div>
                    </div>

                    <div class="section">
                        <div class="section-title">Education & Certifications</div>
                        <div style="display:flex; gap:12px; flex-wrap:wrap;">
                            <div style="flex:1 1 45%;">${htmlEducation}</div>
                            <div style="flex:1 1 45%;">${htmlCerts}</div>
                        </div>
                    </div>

                    <div style="margin-top:18px; font-size:9pt; color:#888; text-align:center;">Generated from ${safeUrl}</div>
                </div>
            </body>
            </html>
        `;

        // Filename with date for traceability
        const datePart = new Date().toISOString().split('T')[0];
        const filename = `Yilmaz_Mustafa_Resume_${datePart}.doc`;

        try {
            const blob = new Blob(['\ufeff', docHtml], { type: 'application/msword' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        } catch (err) {
            console.error('Resume export failed:', err);
            alert('Export failed: ' + (err && err.message ? err.message : 'Unknown error'));
        }
    }
</script>
</body>
</html>
